# rename-by-tmdb
依据TMDBID生成自定义识别词的工具

## 功能

- 支持电影和剧集的重命名规则生成
- 从 TMDB API 获取影视信息
- 生成标准的命名格式
- 生成重命名规则（支持正则表达式）
- 支持集数偏移（仅剧集）
- 支持季数匹配（仅剧集）：
  - 使用原文件名季数
  - 指定特定季数（多个季数用分号分隔，0表示特别篇）
  - 生成所有季（可选是否包含特别篇）
- 支持集数格式选择：
  - 补0站位（如：01、02、03...）
  - 不补0（如：1、2、3...）
- 智能复用已存在的词组，避免重复创建
- 可选上传规则到远程服务器

## 快速开始

1. 从 [Releases](https://github.com/harry/rename-by-tmdb/releases) 页面下载适合您系统的压缩包：

### Windows
- [rename-by-tmdb-v1.0.3-windows-amd64.zip](rename-by-tmdb-v1.0.3-windows-amd64.zip) - x64系统（推荐）
- [rename-by-tmdb-v1.0.3-windows-arm64.zip](rename-by-tmdb-v1.0.3-windows-arm64.zip) - ARM64系统（Surface Pro X等搭载ARM处理器的设备）
- [rename-by-tmdb-v1.0.3-windows-386.zip](rename-by-tmdb-v1.0.3-windows-386.zip) - 32位系统

### macOS
- [rename-by-tmdb-v1.0.3-darwin-amd64.tar.gz](rename-by-tmdb-v1.0.3-darwin-amd64.tar.gz) - Intel芯片
- [rename-by-tmdb-v1.0.3-darwin-arm64.tar.gz](rename-by-tmdb-v1.0.3-darwin-arm64.tar.gz) - Apple Silicon/M系列芯片

### Linux
- [rename-by-tmdb-v1.0.3-linux-amd64.tar.gz](rename-by-tmdb-v1.0.3-linux-amd64.tar.gz) - x86_64系统
- [rename-by-tmdb-v1.0.3-linux-arm64.tar.gz](rename-by-tmdb-v1.0.3-linux-arm64.tar.gz) - ARM64系统

2. 解压下载的文件到任意目录。

3. **重要：** 在可执行文件所在目录创建并配置 `.env` 文件
   ```bash
   # Windows: 复制 .env.example 为 .env
   copy .env.example .env
   
   # macOS/Linux: 复制 .env.example 为 .env
   cp .env.example .env
   ```

4. 编辑 `.env` 文件，设置必需的环境变量：
   ```env
   # TMDB API密钥（必需）
   TMDB_API_KEY=your_tmdb_api_key
   
   # 远程服务器配置（可选，仅在需要上传规则时设置）
   API_BASE_URL=https://msgo.xxxxx.xxx:1234  # API服务器地址
   AUTH_TOKEN=your_auth_token                 # API认证令牌
   UPLOAD_MS=false                           # 是否上传规则到服务器
   ```
   
   > ⚠️ **注意**：`.env` 文件必须与可执行文件在同一目录下，否则程序将无法正常工作。

5. 运行程序：
   ```bash
   # Windows
   rename-by-tmdb-windows-amd64.exe
   
   # macOS/Linux
   ./rename-by-tmdb-darwin-amd64  # 或其他对应版本
   ```

6. 按照程序提示输入：
   - 选择媒体类型（1：电影，2：剧集）
   - 对于电影：
     - 当前文件名中的标题部分  ⚠️选择标题中特定的部分，避免与其他影视作品的原文件名重合
     - TMDB 电影ID
   - 对于剧集：
     - TMDB 剧集ID
     - 当前文件名中的标题部分 ⚠️选择标题中特定的部分，避免与其他影视作品的原文件名重合
     - 是否使用原文件名季数
     - 集数偏移量（可选）

## 目录结构示例

```
your-directory/
├── rename-by-tmdb-xxx-xxx    # 可执行文件（或 .exe）
├── .env                      # 配置文件（必需）
├── .env.example             # 配置文件示例
└── README.md                # 说明文档
```

## 输出示例

<details>
<summary>示例1：电影重命名（黑客帝国）</summary>

```
成功加载配置文件: .env
请选择媒体类型：
1. 电影
2. 剧集
请输入选项（1或2）: 1
请输入当前文件名中的标题部分（例如：The.Matrix）: The.Matrix.1999 
请输入电影ID: 603
命名格式：
黑客帝国.1999.{[tmdbid=603;type=movie]}
词组创建成功，ID: 115

被替换词：
The\.Matrix\.1999[^.]*\.
替换词：
黑客帝国.
电影替换规则上传成功

注意：
1. 正则表达式中的点号（.）已经被转义
2. 替换词中的'\1'表示保留原始集数
3. [^.]* 匹配除点号外的任意字符，用于处理标题和集数之间可能存在的额外字符
4. 替换后的文件名使用TMDB中的官方电影名称
```

> ⚠️ **重要提示**：在输入文件名标题部分时，建议包含年份等信息（如示例中的 `The.Matrix.1999`），这样可以避免与其他影视作品的原文件名重合。例如，如果只输入 `The.Matrix`，可能会误匹配到《黑客帝国》系列的其他电影。
</details>

<details>
<summary>示例2：需要根据集数重新定义季数（航海王）</summary>

```
成功加载配置文件: .env
请选择媒体类型：
1. 电影
2. 剧集
请输入选项（1或2）: 2
请输入剧集ID: 37854
命名格式：
航海王.1999.{[tmdbid=37854;type=tv]}
使用已存在的词组，ID: 139  # 发现已存在相同的命名格式，自动复用词组
请输入当前文件名中的标题部分（例如：One.Piece）: One.Piece
是否使用原文件名季数？(y/n，直接回车默认为y): n
请输入要生成的季数（多季用;分隔，直接回车生成所有季，0表示特别篇）: 1;2;3  # 只生成第1-3季
请输入集数偏移量（如：+1、-1，直接回车表示不偏移）: 
集数是否补0站位？(y/n，直接回车默认为y): n

=== 航海王 各季重命名正则表达式 ===

--- 第 1 季 ---
集数范围：1-61（不补0）

被替换词：
One\.Piece.*(?:S\d{2})?E((0001|0002|0003|0004|0005|0006|0007|0008|0009|0010|0011|0012|0013|0014|0015|0016|0017|0018|0019|0020|0021|0022|0023|0024|0025|0026|0027|0028|0029|0030|0031|0032|0033|0034|0035|0036|0037|0038|0039|0040|0041|0042|0043|0044|0045|0046|0047|0048|0049|0050|0051|0052|0053|0054|0055|0056|0057|0058|0059|0060|0061))
替换词：
航海王.S01E\1.1999.{[tmdbid=37854;type=tv]}
第 1 季替换规则上传成功

--- 第 2 季 ---
集数范围：62-77（不补0）

被替换词：
One\.Piece.*(?:S\d{2})?E((0062|0063|0064|0065|0066|0067|0068|0069|0070|0071|0072|0073|0074|0075|0076|0077))
替换词：
航海王.S02E\1.1999.{[tmdbid=37854;type=tv]}
第 2 季替换规则上传成功

--- 第 3 季 ---
集数范围：78-91（不补0）

被替换词：
One\.Piece.*(?:S\d{2})?E((0078|0079|0080|0081|0082|0083|0084|0085|0086|0087|0088|0089|0090|0091))
替换词：
航海王.S03E\1.1999.{[tmdbid=37854;type=tv]}
第 3 季替换规则上传成功

--- 第 4 季 ---
集数范围：92-130（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0092|0093|0094|0095|0096|0097|0098|0099|0100|0101|0102|0103|0104|0105|0106|0107|0108|0109|0110|0111|0112|0113|0114|0115|0116|0117|0118|0119|0120|0121|0122|0123|0124|0125|0126|0127|0128|0129|0130))
替换词：
航海王.S04E\1.1999.{[tmdbid=37854;type=tv]}
第 4 季替换规则上传成功

--- 第 5 季 ---
集数范围：131-143（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0131|0132|0133|0134|0135|0136|0137|0138|0139|0140|0141|0142|0143))
替换词：
航海王.S05E\1.1999.{[tmdbid=37854;type=tv]}
第 5 季替换规则上传成功

--- 第 6 季 ---
集数范围：144-195（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0144|0145|0146|0147|0148|0149|0150|0151|0152|0153|0154|0155|0156|0157|0158|0159|0160|0161|0162|0163|0164|0165|0166|0167|0168|0169|0170|0171|0172|0173|0174|0175|0176|0177|0178|0179|0180|0181|0182|0183|0184|0185|0186|0187|0188|0189|0190|0191|0192|0193|0194|0195))
替换词：
航海王.S06E\1.1999.{[tmdbid=37854;type=tv]}
第 6 季替换规则上传成功

--- 第 7 季 ---
集数范围：196-228（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0196|0197|0198|0199|0200|0201|0202|0203|0204|0205|0206|0207|0208|0209|0210|0211|0212|0213|0214|0215|0216|0217|0218|0219|0220|0221|0222|0223|0224|0225|0226|0227|0228))
替换词：
航海王.S07E\1.1999.{[tmdbid=37854;type=tv]}
第 7 季替换规则上传成功

--- 第 8 季 ---
集数范围：229-263（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0229|0230|0231|0232|0233|0234|0235|0236|0237|0238|0239|0240|0241|0242|0243|0244|0245|0246|0247|0248|0249|0250|0251|0252|0253|0254|0255|0256|0257|0258|0259|0260|0261|0262|0263))
替换词：
航海王.S08E\1.1999.{[tmdbid=37854;type=tv]}
第 8 季替换规则上传成功

--- 第 9 季 ---
集数范围：264-336（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0264|0265|0266|0267|0268|0269|0270|0271|0272|0273|0274|0275|0276|0277|0278|0279|0280|0281|0282|0283|0284|0285|0286|0287|0288|0289|0290|0291|0292|0293|0294|0295|0296|0297|0298|0299|0300|0301|0302|0303|0304|0305|0306|0307|0308|0309|0310|0311|0312|0313|0314|0315|0316|0317|0318|0319|0320|0321|0322|0323|0324|0325|0326|0327|0328|0329|0330|0331|0332|0333|0334|0335|0336))
替换词：
航海王.S09E\1.1999.{[tmdbid=37854;type=tv]}
第 9 季替换规则上传成功

--- 第 10 季 ---
集数范围：337-381（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0337|0338|0339|0340|0341|0342|0343|0344|0345|0346|0347|0348|0349|0350|0351|0352|0353|0354|0355|0356|0357|0358|0359|0360|0361|0362|0363|0364|0365|0366|0367|0368|0369|0370|0371|0372|0373|0374|0375|0376|0377|0378|0379|0380|0381))
替换词：
航海王.S10E\1.1999.{[tmdbid=37854;type=tv]}
第 10 季替换规则上传成功

--- 第 11 季 ---
集数范围：382-407（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0382|0383|0384|0385|0386|0387|0388|0389|0390|0391|0392|0393|0394|0395|0396|0397|0398|0399|0400|0401|0402|0403|0404|0405|0406|0407))
替换词：
航海王.S11E\1.1999.{[tmdbid=37854;type=tv]}
第 11 季替换规则上传成功

--- 第 12 季 ---
集数范围：408-421（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0408|0409|0410|0411|0412|0413|0414|0415|0416|0417|0418|0419|0420|0421))
替换词：
航海王.S12E\1.1999.{[tmdbid=37854;type=tv]}
第 12 季替换规则上传成功

--- 第 13 季 ---
集数范围：422-522（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0422|0423|0424|0425|0426|0427|0428|0429|0430|0431|0432|0433|0434|0435|0436|0437|0438|0439|0440|0441|0442|0443|0444|0445|0446|0447|0448|0449|0450|0451|0452|0453|0454|0455|0456|0457|0458|0459|0460|0461|0462|0463|0464|0465|0466|0467|0468|0469|0470|0471|0472|0473|0474|0475|0476|0477|0478|0479|0480|0481|0482|0483|0484|0485|0486|0487|0488|0489|0490|0491|0492|0493|0494|0495|0496|0497|0498|0499|0500|0501|0502|0503|0504|0505|0506|0507|0508|0509|0510|0511|0512|0513|0514|0515|0516|0517|0518|0519|0520|0521|0522))
替换词：
航海王.S13E\1.1999.{[tmdbid=37854;type=tv]}
第 13 季替换规则上传成功

--- 第 14 季 ---
集数范围：523-580（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0523|0524|0525|0526|0527|0528|0529|0530|0531|0532|0533|0534|0535|0536|0537|0538|0539|0540|0541|0542|0543|0544|0545|0546|0547|0548|0549|0550|0551|0552|0553|0554|0555|0556|0557|0558|0559|0560|0561|0562|0563|0564|0565|0566|0567|0568|0569|0570|0571|0572|0573|0574|0575|0576|0577|0578|0579|0580))
替换词：
航海王.S14E\1.1999.{[tmdbid=37854;type=tv]}
第 14 季替换规则上传成功

--- 第 15 季 ---
集数范围：581-642（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0581|0582|0583|0584|0585|0586|0587|0588|0589|0590|0591|0592|0593|0594|0595|0596|0597|0598|0599|0600|0601|0602|0603|0604|0605|0606|0607|0608|0609|0610|0611|0612|0613|0614|0615|0616|0617|0618|0619|0620|0621|0622|0623|0624|0625|0626|0627|0628|0629|0630|0631|0632|0633|0634|0635|0636|0637|0638|0639|0640|0641|0642))
替换词：
航海王.S15E\1.1999.{[tmdbid=37854;type=tv]}
第 15 季替换规则上传成功

--- 第 16 季 ---
集数范围：643-692（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0643|0644|0645|0646|0647|0648|0649|0650|0651|0652|0653|0654|0655|0656|0657|0658|0659|0660|0661|0662|0663|0664|0665|0666|0667|0668|0669|0670|0671|0672|0673|0674|0675|0676|0677|0678|0679|0680|0681|0682|0683|0684|0685|0686|0687|0688|0689|0690|0691|0692))
替换词：
航海王.S16E\1.1999.{[tmdbid=37854;type=tv]}
第 16 季替换规则上传成功

--- 第 17 季 ---
集数范围：693-748（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0693|0694|0695|0696|0697|0698|0699|0700|0701|0702|0703|0704|0705|0706|0707|0708|0709|0710|0711|0712|0713|0714|0715|0716|0717|0718|0719|0720|0721|0722|0723|0724|0725|0726|0727|0728|0729|0730|0731|0732|0733|0734|0735|0736|0737|0738|0739|0740|0741|0742|0743|0744|0745|0746|0747|0748))
替换词：
航海王.S17E\1.1999.{[tmdbid=37854;type=tv]}
第 17 季替换规则上传成功

--- 第 18 季 ---
集数范围：749-803（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0749|0750|0751|0752|0753|0754|0755|0756|0757|0758|0759|0760|0761|0762|0763|0764|0765|0766|0767|0768|0769|0770|0771|0772|0773|0774|0775|0776|0777|0778|0779|0780|0781|0782|0783|0784|0785|0786|0787|0788|0789|0790|0791|0792|0793|0794|0795|0796|0797|0798|0799|0800|0801|0802|0803))
替换词：
航海王.S18E\1.1999.{[tmdbid=37854;type=tv]}
第 18 季替换规则上传成功

--- 第 19 季 ---
集数范围：804-877（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0804|0805|0806|0807|0808|0809|0810|0811|0812|0813|0814|0815|0816|0817|0818|0819|0820|0821|0822|0823|0824|0825|0826|0827|0828|0829|0830|0831|0832|0833|0834|0835|0836|0837|0838|0839|0840|0841|0842|0843|0844|0845|0846|0847|0848|0849|0850|0851|0852|0853|0854|0855|0856|0857|0858|0859|0860|0861|0862|0863|0864|0865|0866|0867|0868|0869|0870|0871|0872|0873|0874|0875|0876|0877))
替换词：
航海王.S19E\1.1999.{[tmdbid=37854;type=tv]}
第 19 季替换规则上传成功

--- 第 20 季 ---
集数范围：878-891（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0878|0879|0880|0881|0882|0883|0884|0885|0886|0887|0888|0889|0890|0891))
替换词：
航海王.S20E\1.1999.{[tmdbid=37854;type=tv]}
第 20 季替换规则上传成功

--- 第 21 季 ---
集数范围：892-1088（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((0892|0893|0894|0895|0896|0897|0898|0899|0900|0901|0902|0903|0904|0905|0906|0907|0908|0909|0910|0911|0912|0913|0914|0915|0916|0917|0918|0919|0920|0921|0922|0923|0924|0925|0926|0927|0928|0929|0930|0931|0932|0933|0934|0935|0936|0937|0938|0939|0940|0941|0942|0943|0944|0945|0946|0947|0948|0949|0950|0951|0952|0953|0954|0955|0956|0957|0958|0959|0960|0961|0962|0963|0964|0965|0966|0967|0968|0969|0970|0971|0972|0973|0974|0975|0976|0977|0978|0979|0980|0981|0982|0983|0984|0985|0986|0987|0988|0989|0990|0991|0992|0993|0994|0995|0996|0997|0998|0999|1000|1001|1002|1003|1004|1005|1006|1007|1008|1009|1010|1011|1012|1013|1014|1015|1016|1017|1018|1019|1020|1021|1022|1023|1024|1025|1026|1027|1028|1029|1030|1031|1032|1033|1034|1035|1036|1037|1038|1039|1040|1041|1042|1043|1044|1045|1046|1047|1048|1049|1050|1051|1052|1053|1054|1055|1056|1057|1058|1059|1060|1061|1062|1063|1064|1065|1066|1067|1068|1069|1070|1071|1072|1073|1074|1075|1076|1077|1078|1079|1080|1081|1082|1083|1084|1085|1086|1087|1088))
替换词：
航海王.S21E\1.1999.{[tmdbid=37854;type=tv]}
第 21 季替换规则上传成功

--- 第 22 季 ---
集数范围：1089-1138（使用4位数）

被替换词：
One\.Piece.*(?:S\d{2})?E((1089|1090|1091|1092|1093|1094|1095|1096|1097|1098|1099|1100|1101|1102|1103|1104|1105|1106|1107|1108|1109|1110|1111|1112|1113|1114|1115|1116|1117|1118|1119|1120|1121|1122|1123|1124|1125|1126|1127|1128|1129|1130|1131|1132|1133|1134|1135|1136|1137|1138))
替换词：
航海王.S22E\1.1999.{[tmdbid=37854;type=tv]}
第 22 季替换规则上传成功
```
</details>

<details>
<summary>示例3：需要集数偏移（火影忍者：疾风传）</summary>

### 原文件中《火影忍者》与《火影忍者：疾风传》使用了连续的集数，因此从221集开始为《火影忍者：疾风传》

```
成功加载配置文件: .env
请选择媒体类型：
1. 电影
2. 剧集
请输入选项（1或2）: 2
请输入剧集ID: 31910
命名格式：
火影忍者：疾风传.2007.{[tmdbid=31910;type=tv]}
词组创建成功，ID: 144
请输入当前文件名中的标题部分（例如：One.Piece）: Naruto
是否使用原文件名季数？(y/n，直接回车默认为y): n
请输入集数偏移量（如：+1、-1，直接回车表示不偏移）: -220

=== 火影忍者：疾风传 各季重命名正则表达式 ===

--- 第 1 季 ---
集数范围：221-252（使用3位数）
集数偏移量：-220
原始集数示例：221 → 实际集数：001

被替换词：
Naruto.*(?:S\d{2})?E((221|222|223|224|225|226|227|228|229|230|231|232|233|234|235|236|237|238|239|240|241|242|243|244|245|246|247|248|249|250|251|252))
替换词：
火影忍者：疾风传.S01E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S01E
后定位词：
.2007.
第 1 季替换规则上传成功

--- 第 2 季 ---
集数范围：253-273（使用3位数）
集数偏移量：-220
原始集数示例：253 → 实际集数：033

被替换词：
Naruto.*(?:S\d{2})?E((253|254|255|256|257|258|259|260|261|262|263|264|265|266|267|268|269|270|271|272|273))
替换词：
火影忍者：疾风传.S02E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S02E
后定位词：
.2007.
第 2 季替换规则上传成功

--- 第 3 季 ---
集数范围：274-291（使用3位数）
集数偏移量：-220
原始集数示例：274 → 实际集数：054

被替换词：
Naruto.*(?:S\d{2})?E((274|275|276|277|278|279|280|281|282|283|284|285|286|287|288|289|290|291))
替换词：
火影忍者：疾风传.S03E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S03E
后定位词：
.2007.
第 3 季替换规则上传成功

--- 第 4 季 ---
集数范围：292-308（使用3位数）
集数偏移量：-220
原始集数示例：292 → 实际集数：072

被替换词：
Naruto.*(?:S\d{2})?E((292|293|294|295|296|297|298|299|300|301|302|303|304|305|306|307|308))
替换词：
火影忍者：疾风传.S04E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S04E
后定位词：
.2007.
第 4 季替换规则上传成功

--- 第 5 季 ---
集数范围：309-332（使用3位数）
集数偏移量：-220
原始集数示例：309 → 实际集数：089

被替换词：
Naruto.*(?:S\d{2})?E((309|310|311|312|313|314|315|316|317|318|319|320|321|322|323|324|325|326|327|328|329|330|331|332))
替换词：
火影忍者：疾风传.S05E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S05E
后定位词：
.2007.
第 5 季替换规则上传成功

--- 第 6 季 ---
集数范围：333-363（使用3位数）
集数偏移量：-220
原始集数示例：333 → 实际集数：113

被替换词：
Naruto.*(?:S\d{2})?E((333|334|335|336|337|338|339|340|341|342|343|344|345|346|347|348|349|350|351|352|353|354|355|356|357|358|359|360|361|362|363))
替换词：
火影忍者：疾风传.S06E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S06E
后定位词：
.2007.
第 6 季替换规则上传成功

--- 第 7 季 ---
集数范围：364-371（使用3位数）
集数偏移量：-220
原始集数示例：364 → 实际集数：144

被替换词：
Naruto.*(?:S\d{2})?E((364|365|366|367|368|369|370|371))
替换词：
火影忍者：疾风传.S07E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S07E
后定位词：
.2007.
第 7 季替换规则上传成功

--- 第 8 季 ---
集数范围：372-395（使用3位数）
集数偏移量：-220
原始集数示例：372 → 实际集数：152

被替换词：
Naruto.*(?:S\d{2})?E((372|373|374|375|376|377|378|379|380|381|382|383|384|385|386|387|388|389|390|391|392|393|394|395))
替换词：
火影忍者：疾风传.S08E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S08E
后定位词：
.2007.
第 8 季替换规则上传成功

--- 第 9 季 ---
集数范围：396-416（使用3位数）
集数偏移量：-220
原始集数示例：396 → 实际集数：176

被替换词：
Naruto.*(?:S\d{2})?E((396|397|398|399|400|401|402|403|404|405|406|407|408|409|410|411|412|413|414|415|416))
替换词：
火影忍者：疾风传.S09E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S09E
后定位词：
.2007.
第 9 季替换规则上传成功

--- 第 10 季 ---
集数范围：417-441（使用3位数）
集数偏移量：-220
原始集数示例：417 → 实际集数：197

被替换词：
Naruto.*(?:S\d{2})?E((417|418|419|420|421|422|423|424|425|426|427|428|429|430|431|432|433|434|435|436|437|438|439|440|441))
替换词：
火影忍者：疾风传.S10E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S10E
后定位词：
.2007.
第 10 季替换规则上传成功

--- 第 11 季 ---
集数范围：442-462（使用3位数）
集数偏移量：-220
原始集数示例：442 → 实际集数：222

被替换词：
Naruto.*(?:S\d{2})?E((442|443|444|445|446|447|448|449|450|451|452|453|454|455|456|457|458|459|460|461|462))
替换词：
火影忍者：疾风传.S11E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S11E
后定位词：
.2007.
第 11 季替换规则上传成功

--- 第 12 季 ---
集数范围：463-495（使用3位数）
集数偏移量：-220
原始集数示例：463 → 实际集数：243

被替换词：
Naruto.*(?:S\d{2})?E((463|464|465|466|467|468|469|470|471|472|473|474|475|476|477|478|479|480|481|482|483|484|485|486|487|488|489|490|491|492|493|494|495))
替换词：
火影忍者：疾风传.S12E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S12E
后定位词：
.2007.
第 12 季替换规则上传成功

--- 第 13 季 ---
集数范围：496-515（使用3位数）
集数偏移量：-220
原始集数示例：496 → 实际集数：276

被替换词：
Naruto.*(?:S\d{2})?E((496|497|498|499|500|501|502|503|504|505|506|507|508|509|510|511|512|513|514|515))
替换词：
火影忍者：疾风传.S13E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S13E
后定位词：
.2007.
第 13 季替换规则上传成功

--- 第 14 季 ---
集数范围：516-540（使用3位数）
集数偏移量：-220
原始集数示例：516 → 实际集数：296

被替换词：
Naruto.*(?:S\d{2})?E((516|517|518|519|520|521|522|523|524|525|526|527|528|529|530|531|532|533|534|535|536|537|538|539|540))
替换词：
火影忍者：疾风传.S14E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S14E
后定位词：
.2007.
第 14 季替换规则上传成功

--- 第 15 季 ---
集数范围：541-568（使用3位数）
集数偏移量：-220
原始集数示例：541 → 实际集数：321

被替换词：
Naruto.*(?:S\d{2})?E((541|542|543|544|545|546|547|548|549|550|551|552|553|554|555|556|557|558|559|560|561|562|563|564|565|566|567|568))
替换词：
火影忍者：疾风传.S15E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S15E
后定位词：
.2007.
第 15 季替换规则上传成功

--- 第 16 季 ---
集数范围：569-581（使用3位数）
集数偏移量：-220
原始集数示例：569 → 实际集数：349

被替换词：
Naruto.*(?:S\d{2})?E((569|570|571|572|573|574|575|576|577|578|579|580|581))
替换词：
火影忍者：疾风传.S16E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S16E
后定位词：
.2007.
第 16 季替换规则上传成功

--- 第 17 季 ---
集数范围：582-592（使用3位数）
集数偏移量：-220
原始集数示例：582 → 实际集数：362

被替换词：
Naruto.*(?:S\d{2})?E((582|583|584|585|586|587|588|589|590|591|592))
替换词：
火影忍者：疾风传.S17E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S17E
后定位词：
.2007.
第 17 季替换规则上传成功

--- 第 18 季 ---
集数范围：593-613（使用3位数）
集数偏移量：-220
原始集数示例：593 → 实际集数：373

被替换词：
Naruto.*(?:S\d{2})?E((593|594|595|596|597|598|599|600|601|602|603|604|605|606|607|608|609|610|611|612|613))
替换词：
火影忍者：疾风传.S18E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S18E
后定位词：
.2007.
第 18 季替换规则上传成功

--- 第 19 季 ---
集数范围：614-633（使用3位数）
集数偏移量：-220
原始集数示例：614 → 实际集数：394

被替换词：
Naruto.*(?:S\d{2})?E((614|615|616|617|618|619|620|621|622|623|624|625|626|627|628|629|630|631|632|633))
替换词：
火影忍者：疾风传.S19E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S19E
后定位词：
.2007.
第 19 季替换规则上传成功

--- 第 20 季 ---
集数范围：634-720（使用3位数）
集数偏移量：-220
原始集数示例：634 → 实际集数：414

被替换词：
Naruto.*(?:S\d{2})?E((634|635|636|637|638|639|640|641|642|643|644|645|646|647|648|649|650|651|652|653|654|655|656|657|658|659|660|661|662|663|664|665|666|667|668|669|670|671|672|673|674|675|676|677|678|679|680|681|682|683|684|685|686|687|688|689|690|691|692|693|694|695|696|697|698|699|700|701|702|703|704|705|706|707|708|709|710|711|712|713|714|715|716|717|718|719|720))
替换词：
火影忍者：疾风传.S20E\1.2007.{[tmdbid=31910;type=tv]}

前定位词：
火影忍者：疾风传.S20E
后定位词：
.2007.
第 20 季替换规则上传成功
```
</details>

<details>
<summary>示例4：使用原文件名季数（JOJO的奇妙冒险）</summary>

### 原文件名已经包含正确的季数，因此保留原始季数信息

```
成功加载配置文件: .env
请选择媒体类型：
1. 电影
2. 剧集
请输入选项（1或2）: 2
请输入剧集ID: 45790
命名格式：
JOJO的奇妙冒险.2012.{[tmdbid=45790;type=tv]}
使用已存在的词组，ID: 142  # 发现已存在相同的命名格式，自动复用词组
请输入当前文件名中的标题部分（例如：One.Piece）: JoJos.Bizarre.Adventure
是否使用原文件名季数？(y/n，直接回车默认为y): 
请输入集数偏移量（如：+1、-1，直接回车表示不偏移）: 

=== JOJO的奇妙冒险 各季重命名正则表达式 ===

--- 特别篇 ---
集数范围：1-2（使用2位数）

被替换词：
JoJos\.Bizarre\.Adventure.*S00E((01|02))
替换词：
JOJO的奇妙冒险.S00E\1.2012.{[tmdbid=45790;type=tv]}
第 0 季替换规则上传成功

--- 第 1 季 ---
集数范围：1-26（使用2位数）

被替换词：
JoJos\.Bizarre\.Adventure.*S01E((01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26))
替换词：
JOJO的奇妙冒险.S01E\1.2012.{[tmdbid=45790;type=tv]}
第 1 季替换规则上传成功

--- 第 2 季 ---
集数范围：1-48（使用2位数）

被替换词：
JoJos\.Bizarre\.Adventure.*S02E((01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|40|41|42|43|44|45|46|47|48))
替换词：
JOJO的奇妙冒险.S02E\1.2012.{[tmdbid=45790;type=tv]}
第 2 季替换规则上传成功

--- 第 3 季 ---
集数范围：1-39（使用2位数）

被替换词：
JoJos\.Bizarre\.Adventure.*S03E((01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39))
替换词：
JOJO的奇妙冒险.S03E\1.2012.{[tmdbid=45790;type=tv]}
第 3 季替换规则上传成功

--- 第 4 季 ---
集数范围：1-39（使用2位数）

被替换词：
JoJos\.Bizarre\.Adventure.*S04E((01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39))
替换词：
JOJO的奇妙冒险.S04E\1.2012.{[tmdbid=45790;type=tv]}
第 4 季替换规则上传成功

--- 第 5 季 ---
集数范围：1-38（使用2位数）

被替换词：
JoJos\.Bizarre\.Adventure.*S05E((01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38))
替换词：
JOJO的奇妙冒险.S05E\1.2012.{[tmdbid=45790;type=tv]}
第 5 季替换规则上传成功
```
</details>

## 环境变量说明

- `TMDB_API_KEY`：（必需）TMDB API 密钥，用于获取影视信息
- `API_BASE_URL`：（可选）远程服务器地址，启用上传功能时必需
- `AUTH_TOKEN`：（可选）远程服务器认证令牌，启用上传功能时必需
- `UPLOAD_MS`：（可选）是否上传规则到远程服务器，设置为 true 时启用上传功能

## 环境要求

- Go 1.22.5 或更高版本 
- TMDB API Key
- 如需上传功能，需要有效的 AUTH_TOKEN 